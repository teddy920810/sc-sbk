webpackJsonp([4],{"9GJa":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("pFYg"),i=n.n(a),r={props:{mapcenter:{type:String,default:"34.759666,113.648071"},oldmarker:{type:String,default:"34.759666,113.648071"},inputDefault:{type:String,default:""}},data:function(){return{qqmap:"",premarker:"",marker:"",inputVal:"",latlngCurrent:""}},mounted:function(){var e=this;this.inputVal=this.inputDefault,this.oldmarker&&(this.latlngCurrent=this.oldmarker||this.mapcenter),"object"==("undefined"==typeof qq?"undefined":i()(qq))?e.createMap():this.loadQQmap(),window.onMapFileLoad=function(){console.log("qqmap加载完成"),e.createMap()}},watch:{oldmarker:function(e,t){e&&(console.log(void 0===e?"undefined":i()(e)),this.latlngCurrent=e,this.qqmap&&this.createMarker())},inputDefault:function(e,t){console.log("默认地址变成：",e),this.inputVal=e}},methods:{loadQQmap:function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://map.qq.com/api/js?v=2.exp&key=2TJBZ-SPVCO-W2BWC-SE4TL-Q25DS-MTB24&callback=onMapFileLoad",document.body.appendChild(e)},search:function(){var e=this,t=new qq.maps.Geocoder({complete:function(t){e.qqmap.setCenter(t.detail.location),e.qqmap.setZoom(12)}}),n=this.inputVal;console.log("搜索地址：",n),t.getLocation(n)},inputChange:function(){this.$emit("addr",this.inputVal)},createMap:function(){var e=this;this.qqmap=new qq.maps.Map(document.getElementById("qqmapCont"),{center:new qq.maps.LatLng(this.mapcenter.split(",")[0],this.mapcenter.split(",")[1]),zoom:12}),setTimeout(function(){e.createMarker(),e.bindMapEvent()},500)},createMarker:function(){var e=this;(e.premarker&&e.premarker.setMap(null),this.oldmarker)?(console.log("编辑模式：",this.oldmarker),e.qqmap.setCenter(new qq.maps.LatLng(e.oldmarker.split(",")[0],e.oldmarker.split(",")[1])),e.premarker=new qq.maps.Marker({position:new qq.maps.LatLng(e.oldmarker.split(",")[0],e.oldmarker.split(",")[1]),map:e.qqmap})):new qq.maps.CityService({complete:function(t){e.qqmap.setCenter(t.detail.latLng)}}).searchLocalCity()},bindMapEvent:function(){var e=this;qq.maps.event.addListener(e.qqmap,"click",function(t){e.marker&&e.marker.setMap(null),e.premarker&&e.premarker.setMap(null),e.$emit("mapclick",t.latLng),e.latlngCurrent=t.latLng.lat+","+t.latLng.lng,e.marker=new qq.maps.Marker({position:t.latLng,map:e.qqmap})});var t=document.querySelector(".lngTips");window.getComputedStyle(document.querySelector(".mapWrap")).width;qq.maps.event.addListener(e.qqmap,"mousemove",function(e){t.style.display="block",t.style.top=e.pixel.y+10+"px",t.style.left=e.pixel.x+15+"px",t.innerText="点击选择此坐标："+e.latLng.lat+","+e.latLng.lng}),qq.maps.event.addListener(e.qqmap,"mouseout",function(e){t.style.display="none"})}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{overflow:"hidden"}},[n("section",[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"城市名称"},nativeOn:{keyup:function(t){e.inputChange(t)}},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("获取地理位置")])],1),e._v(" "),n("el-form-item",[n("el-input",{staticStyle:{width:"246px"},attrs:{placeholder:"坐标值"},model:{value:e.latlngCurrent,callback:function(t){e.latlngCurrent=t},expression:"latlngCurrent"}})],1)],1)],1)],1)]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mapWrap"},[t("div",{staticClass:"qqmap",attrs:{id:"qqmapCont"}}),this._v(" "),t("div",{staticClass:"lngTips"})])}]};var o=n("VU/8")(r,p,!1,function(e){n("rJ/D")},null,null);t.default=o.exports},m3i8:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n.qqmap { width:100%; height:600px;\n}\n.mapWrap { position:relative; width:100%; height:600px; overflow:hidden; margin-top:15px;\n}\n.lngTips { display:none; width:255px; height:40px; padding:5px 7px; overflow:hidden; position:absolute; left:0; top:0; z-index:123456; background:#ffffff; border-radius:5px;\n  line-height:20px; -webkit-box-shadow:#eeeeee 1px 1px 3px; box-shadow:#eeeeee 1px 1px 3px; border:#eeeeee 1px solid; font-size:12px;\n}\n","",{version:3,sources:["D:/project/github/SpringBoot-Shiro-Vue/vue/src/views/wx/selectPoint.vue"],names:[],mappings:";AACA,SAAS,WAAW,CAAC,aAAa;CACjC;AACD,WAAW,kBAAkB,CAAC,WAAW,CAAC,aAAa,CAAC,gBAAgB,CAAC,gBAAgB;CACxF;AACD,WAAW,aAAa,CAAC,YAAY,CAAC,YAAY,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,mBAAmB,CAAC,kBAAkB;EAC3K,iBAAiB,CAAC,uCAAuC,CAAC,+BAA+B,CAAC,yBAAyB,CAAC,eAAe;CACpI",file:"selectPoint.vue",sourcesContent:["\n.qqmap { width:100%; height:600px;\n}\n.mapWrap { position:relative; width:100%; height:600px; overflow:hidden; margin-top:15px;\n}\n.lngTips { display:none; width:255px; height:40px; padding:5px 7px; overflow:hidden; position:absolute; left:0; top:0; z-index:123456; background:#ffffff; border-radius:5px;\n  line-height:20px; -webkit-box-shadow:#eeeeee 1px 1px 3px; box-shadow:#eeeeee 1px 1px 3px; border:#eeeeee 1px solid; font-size:12px;\n}\n"],sourceRoot:""}])},"rJ/D":function(e,t,n){var a=n("m3i8");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("5f3c09cc",a,!0)}});