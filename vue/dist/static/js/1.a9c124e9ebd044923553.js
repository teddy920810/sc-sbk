webpackJsonp([1],{"/K1s":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("jwfv");var a={methods:{dispatch(t,e,i){for(var n=this.$parent||this.$root,a=n.$options.componentName;n&&(!a||a!==t);)(n=n.$parent)&&(a=n.$options.componentName);n&&n.$emit.apply(n,[e].concat(i))},broadcast(t,e,i){(function t(e,i,n){this.$children.forEach(a=>{a.$options.componentName===e?a.$emit.apply(a,[i].concat(n)):t.apply(a,[e,i].concat([n]))})}).call(this,t,e,i)}}};Object.prototype.hasOwnProperty;function r(){}function l(t,e,i){let n=t,a=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0;for(let t=a.length;r<t-1&&(n||i);++r){let t=a[r];if(!(t in n)){if(i)throw new Error("please transfer a valid prop path to form item!");break}n=n[t]}return{o:n,k:a[r],v:n?n[a[r]]:null}}var s={name:"ElFormItem",componentName:"ElFormItem",mixins:[a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},watch:{error:{immediate:!0,handler:function(t){this.validateMessage=t,this.validateState=t?"error":""}},validateStatus:function(t){this.validateState=t}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var t={};if("top"===this.form.labelPosition)return t;var e=this.labelWidth||this.form.labelWidth;return e&&(t.width=e),t},contentStyle:function(){var t={},e=this.label;if("top"===this.form.labelPosition||this.form.inline)return t;if(!e&&!this.labelWidth&&this.isNested)return t;var i=this.labelWidth||this.form.labelWidth;return i&&(t.marginLeft=i),t},form:function(){for(var t=this.$parent,e=t.$options.componentName;"ElForm"!==e;)"ElFormItem"===e&&(this.isNested=!0),e=(t=t.$parent).$options.componentName;return t},fieldValue:{cache:!1,get:function(){var t=this.form.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/,".")),l(t,e,!0).v}}},isRequired:function(){var t=this.getRules(),e=!1;return t&&t.length&&t.every(function(t){return!t.required||(e=!0,!1)}),e},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return(this.$ELEMENT||{}).size||this.elFormItemSize}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1}},methods:{validate:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;this.validateDisabled=!1;var a=this.getFilteredRule(t);if((!a||0===a.length)&&void 0===this.required)return i(),!0;this.validateState="validating";var l={};a&&a.length>0&&a.forEach(function(t){delete t.trigger}),l[this.prop]=a;var s=new n.default(l),o={};o[this.prop]=this.fieldValue,s.validate(o,{firstFields:!0},function(t,n){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",i(e.validateMessage,n),e.elForm&&e.elForm.$emit("validate",e.prop,!t)})},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){this.validateState="",this.validateMessage="";var t=this.form.model,e=this.fieldValue,i=this.prop;-1!==i.indexOf(":")&&(i=i.replace(/:/,"."));var n=l(t,i,!0);this.validateDisabled=!0,Array.isArray(e)?n.o[n.k]=[].concat(this.initialValue):n.o[n.k]=this.initialValue,this.broadcast("ElSelect","fieldReset"),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var t=this.form.rules,e=this.rules,i=void 0!==this.required?{required:!!this.required}:[],n=l(t,this.prop||"");return t=t?n.o[this.prop||""]||n.v:[],[].concat(e||t||[]).concat(i)},getFilteredRule:function(t){return this.getRules().filter(function(e){return!e.trigger||""===t||(Array.isArray(e.trigger)?e.trigger.indexOf(t)>-1:e.trigger===t)}).map(function(t){return function(t){for(let e=1,i=arguments.length;e<i;e++){let i=arguments[e]||{};for(let e in i)if(i.hasOwnProperty(e)){let n=i[e];void 0!==n&&(t[e]=n)}}return t}({},t)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var t=this.fieldValue;Array.isArray(t)&&(t=[].concat(t)),Object.defineProperty(this,"initialValue",{value:t}),(this.getRules().length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":t.elForm&&t.elForm.statusIcon,"is-error":"error"===t.validateState,"is-validating":"validating"===t.validateState,"is-success":"success"===t.validateState,"is-required":t.isRequired||t.required},t.sizeClass?"el-form-item--"+t.sizeClass:""]},[t.label||t.$slots.label?i("label",{staticClass:"el-form-item__label",style:t.labelStyle,attrs:{for:t.labelFor}},[t._t("label",[t._v(t._s(t.label+t.form.labelSuffix))])],2):t._e(),t._v(" "),i("div",{staticClass:"el-form-item__content",style:t.contentStyle},[t._t("default"),t._v(" "),i("transition",{attrs:{name:"el-zoom-in-top"}},["error"===t.validateState&&t.showMessage&&t.form.showMessage?i("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"==typeof t.inlineMessage?t.inlineMessage:t.elForm&&t.elForm.inlineMessage||!1}},[t._v("\n        "+t._s(t.validateMessage)+"\n      ")]):t._e()])],2)])},staticRenderFns:[]},d={components:{ElFormItem:i("VU/8")(s,o,!1,null,null,null).exports,QqMap:i("WO46").default},data:function(){return{totalCount:0,list:[],listLoading:!1,listQuery:{pageNum:1,pageRow:50,name:""},dialogStatus:"create",dialogFormVisible:!1,textMap:{update:"编辑",create:"创建集训"},tempTraining:{id:"",trainingName:"",trainingContent:"",trainingDate:"",latitude:"",longitude:"",checkBeginTime:"",checkEndTime:"",version:""},logDialogVisible:!1,logList:[],logListLoading:!1,logTotalCount:0,logListQuery:{pageNum:1,pageRow:10,name:""}}},created:function(){this.getList()},mounted:{},methods:{getList:function(){var t=this;this.listLoading=!0,this.api({url:"/sys/trainingCheck/",method:"get",params:this.listQuery}).then(function(e){t.listLoading=!1,t.list=e.list,t.totalCount=e.totalCount})},handleSizeChange:function(t){this.listQuery.pageRow=t,this.handleFilter()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.getList()},getIndex:function(t){return(this.listQuery.pageNum-1)*this.listQuery.pageRow+t+1},showCreate:function(){this.tempTraining.id="",this.tempTraining.trainingName="",this.tempTraining.trainingDate="",this.tempTraining.trainingContent="",this.tempTraining.longitude="",this.tempTraining.latitude="",this.tempTraining.checkBeginTime="",this.tempTraining.checkEndTime="",this.tempTraining.version="",this.dialogStatus="create",this.dialogFormVisible=!0},showUpdate:function(t){this.tempTraining.id=this.list[t].id,this.tempTraining.trainingName=this.list[t].trainingName,this.tempTraining.trainingDate=this.list[t].trainingDate,this.tempTraining.trainingContent=this.list[t].trainingContent,this.tempTraining.longitude=this.list[t].longitude,this.tempTraining.latitude=this.list[t].latitude,this.tempTraining.checkBeginTime=this.list[t].checkBeginTime,this.tempTraining.checkEndTime=this.list[t].checkEndTime,this.tempTraining.version=this.list[t].version,this.dialogStatus="update",this.dialogFormVisible=!0},createTc:function(){var t=this;this.api({url:"/sys/trainingCheck/addTc",method:"post",data:this.tempTraining}).then(function(){t.getList(),t.dialogFormVisible=!1})},updateTc:function(){var t=this;this.api({url:"/sys/trainingCheck/updateTc",method:"post",data:this.tempTraining}).then(function(){t.getList(),t.dialogFormVisible=!1})},updateAddress:function(t){console.log(t),this.tempTraining.latitude=t.latlng.lat,this.tempTraining.longitude=t.latlng.lng},showCheckLog:function(t){var e=this;this.logListQuery.trainingCheckId=this.list[t].id,this.logListLoading=!0,this.api({url:"/sys/trainingCheck/byTcId",method:"get",params:this.logListQuery}).then(function(t){e.logListLoading=!1,e.logList=t.list,e.logTotalCount=t.totalCount}),this.logDialogVisible=!0},getLogIndex:function(t){return(this.logListQuery.pageNum-1)*this.logListQuery.pageRow+t+1}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-form",[i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.showCreate}},[t._v("添加\n        ")])],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{domProps:{textContent:t._s(t.getIndex(e.$index))}})]}}])}),t._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"trainingName",label:"活动名称"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"集训时间",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.trainingDate))])]}}])}),t._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"trainingContent",label:"集训内容"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"打卡记录",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:function(i){t.showCheckLog(e.$index)}}},[t._v("查看打卡记录")])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"管理",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:function(i){t.showUpdate(e.$index)}}},[t._v("修改")])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.listQuery.pageNum,"page-size":t.listQuery.pageRow,total:t.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{staticClass:"small-space",staticStyle:{width:"300px","margin-left":"50px"},attrs:{model:t.tempTraining,"label-position":"left","label-width":"80px",size:"mini"}},[i("el-form-item",{attrs:{label:"集训名称"}},[i("el-input",{attrs:{type:"text"},model:{value:t.tempTraining.trainingName,callback:function(e){t.$set(t.tempTraining,"trainingName",e)},expression:"tempTraining.trainingName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"集训内容"}},[i("el-input",{attrs:{type:"text"},model:{value:t.tempTraining.trainingContent,callback:function(e){t.$set(t.tempTraining,"trainingContent",e)},expression:"tempTraining.trainingContent"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"集训时间"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tempTraining.trainingDate,callback:function(e){t.$set(t.tempTraining,"trainingDate",e)},expression:"tempTraining.trainingDate"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"签到开始时间"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"签到开始时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.tempTraining.checkBeginTime,callback:function(e){t.$set(t.tempTraining,"checkBeginTime",e)},expression:"tempTraining.checkBeginTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"签到结束时间"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"签到结束时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.tempTraining.checkEndTime,callback:function(e){t.$set(t.tempTraining,"checkEndTime",e)},expression:"tempTraining.checkEndTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"集训地点"}},[i("el-input",{attrs:{type:"text",placeholder:"经度",readonly:"true"},model:{value:t.tempTraining.longitude,callback:function(e){t.$set(t.tempTraining,"longitude",e)},expression:"tempTraining.longitude"}}),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:"纬度",readonly:"true"},model:{value:t.tempTraining.latitude,callback:function(e){t.$set(t.tempTraining,"latitude",e)},expression:"tempTraining.latitude"}}),t._v(" "),i("qq-map",{on:{location:t.updateAddress}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"success"},on:{click:t.createTc}},[t._v("创 建")]):i("el-button",{attrs:{type:"primary"},on:{click:t.updateTc}},[t._v("修 改")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"签到记录",visible:t.logDialogVisible,width:"60%"},on:{"update:visible":function(e){t.logDialogVisible=e}}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.logListLoading,expression:"logListLoading",modifiers:{body:!0}}],attrs:{data:t.logList,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{domProps:{textContent:t._s(t.getLogIndex(e.$index))}})]}}])}),t._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"wxUser.nickName",label:"名称"}}),t._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"checkTime",label:"签到时间"}})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.logListQuery.pageNum,"page-size":t.logListQuery.pageRow,total:t.logTotalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var u=i("VU/8")(d,c,!1,function(t){i("Dkr8")},null,null);e.default=u.exports},Dkr8:function(t,e,i){var n=i("TTzL");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("1b09f50e",n,!0)},TTzL:function(t,e,i){(t.exports=i("FZ+f")(!0)).push([t.i,"\n#container {\n  min-width:600px;\n  min-height:767px;\n}\n.qqmap { width: 700px;\n  height: 600px;\n}\n","",{version:3,sources:["D:/project/github/SpringBoot-Shiro-Vue/vue/src/views/wx/training.vue"],names:[],mappings:";AACA;EACE,gBAAgB;EAChB,iBAAiB;CAClB;AACD,SAAS,aAAa;EACpB,cAAc;CACf",file:"training.vue",sourcesContent:["\n#container {\n  min-width:600px;\n  min-height:767px;\n}\n.qqmap { width: 700px;\n  height: 600px;\n}\n"],sourceRoot:""}])}});